# 读书笔记

##### 阅读者：hauk0101

## 简介
书名：《Vue2实践揭秘》<br>
作者：梁睿坤
出版发行：电子工业出版社
出版时间：2017年4月


## 读后感

    本书读了两遍，第一遍只读到了第3章。初衷是为了能够将 vue 从0到1的练习并使用起来，但效果不是很好。
    之后，随着实际项目中的使用。即在完全没有使用过 vue 的情况下，接到任务，需要在1周内完成一个上线后台项目，于是便硬着头皮扛下来了。
    在后面的迭代空闲之余，巧合碰到国庆假期，遂又拿起此书，因为是从同事处借阅的，所以决心假日内阅读完，正好赶在节假日最后一天，算是完成了自己的计划。
    说实话，第一遍读的时候，并没有太多感触，甚至没有太多印象。
    反而是在做了实际项目之后，回过头来，再看此书，方才知晓作者所言何意。
    本书给我最大的收获就是，在第6章中的高级用法，让我知道了在实际项目中所使用的 element-ui 的原理。
    本书给我最大的困惑是，通过至少2个章节所讲述的测试技术，其实我能体会到作者的用意，但是就是不知道作者是在实际项目中，何时介入的测试。我能理解在提取重构公共组件、多个共用 UI 组件时介入单元测试。因为这些目的很明确，都是为了让其他地方更稳定、可靠的复用组件。但我仍然不知道，当团队处于紧张的业务迭代周期时，该如何介入测试。所以，我觉得如果作者是想要向读者表达测试的重要性，通过实际案例，或是项目举例来向我们说明实际项目中如何引入测试，应该更有说服力一些。因为对我来说，工具可能不是壁垒，而使用的时机及方式，才是最有吸引力的点。

## 总结
### 第1章 例说 Vue.js

本章主要是通过一个 Todo 的示例简单介绍了一些 vue 与普通开发的区别，实战性还是蛮强的，作者的目的应该就是为了吸引新手的兴趣吧。

在我读完这章之后，以及按照书本的敲了demo之后，给我的感觉是，了解了 vue-cli 的基本目录和配置，以及认识了一些基本概念，比如 v-for 指令等。

个人认为值得 Mark 的一些知识点如下：

* 一个 Vue 实例必须与一个页面元素绑定。
* 组件模板必须且只能有一个顶层元素，如果在组件模块内设置多个顶层元素，将会引发编译异常。（也就是说，在组件模块内，必须有且仅能有有一个根元素）
* 一个组件的 data 选项必须是一个函数，否则会造成同一个组件，在不同地方被引用时，data 数据相互影响。
* v-for 指令的一些用法：
    * 写法：
    
        ```
            <ul>
                <li v-for="(item,index) in items">
                <label> {{index}} {{item.value}}</label>
                </li>
            </ul>
        ```
    * item 为遍历数组中的单个元素
    * index为当前元素的索引值
* 属性绑定的用法：v-bind ，比如 :class,:id，:style 等等，需要用的时候再多熟悉熟悉即可。
* 如果在元素属性中不加上 “:”，Vue 认为是向这个属性赋上字符串值而不是Vue组件上定义的属性引用。
* 过滤器：实质是一个只带单一参数的函数，Vue2中已不再默认内置，需要引入相关组件。同时需要注意，过滤器中是没有 this 引用的，过滤器内的 this 是一个 undefined 的值。

总的来说，理解起来还没有遇到坑，尤其是看到 `<template></template>` 时候，感觉跟 `ejs`、`nunjucks` 这类的 Node 服务端渲染的模板很类似，有异曲同工之处。   


### 第2章 工程化的 Vue.js 开发

*  本章前面两小节主要讲了脚手架 vue-cli 的用法，以及相关说明，如果非必要情况，都是建议使用官方推荐的 vue-cli 来初始化项目的一些目录结构和基础配置，这会省去很多时间，这里也不多说，用的时候，自然知道怎么入手。

* 接着用一小节简要的讲解了一些 webpack 相关的配置知识及说明。同样，这一块内容更建议从 webpack 入手去详细的了解，之后再回过头来观察和使用 vue 项目中的 webpack 相关配置应该会更容易一些。

* 最后一小节其实花费了很多功夫在介绍一些单元测试环境，即“基于 Karma + Phantom + Mocha + Sinon + Chai 的单元测试环境”。说实在的，个人认为里面的干货其实不多，但是对于我这种没有怎么了解过单元测试这种东西的新人来说，还是很有科普价值，通读一篇之后发现其实对于目前我的需求来说意义不大，如果后期项目中需要用到相关的单元测试知识时，可以把里面相关的关键字作为选择和参考的对象，去进一步深入了解。

* 说白了这一章只是把 Vue.js 和工程化相关的一些非编码需求的知识点向读者过了一篇，个人认为，方向性和概念性的价值（各种和工程化相关的关键词）大于实际操作的价值，尤其是对于新人来说。毕竟，最大的需求，其实是能够快速在项目中应用 Vue 框架而已，至于后续的深入和探索，都需要建立在已经能够正常开发的前提，不然容易本末倒置。

### 第3章 路由与页面间导航

* 本章开篇关于原型设计、思维导图等的相关介绍，还是在某种程度上给我了或多或少的启发的。即当在开发一个项目时，如果毫无头绪，或者头绪杂乱无章时，不妨先放慢开发的进度，优先思考一下究竟自己想要做什么，然后理清思路，再分步骤去实现。

* vue-router 
    * 路由的使用示例，可以在网上搜索相应的教程和案例
    * 路由的模式：
        * Hash: 使用 URL hash 值来作为路由。支持所有浏览器，包括不支持 HTML5 History API 的浏览器（vue 默认是使用此模式）
        * History: 依赖 HTML5 History API 和服务器配置，如果使用此模式，需要服务端配合，在 vue-ssr 的使用中，需要用到此模式。
        * Abstract: 支持所有 JavaScript 运行环境，如 Node.js 服务器端。如果发现没有浏览器的 API ，路由会自动强制进入这个模式

* 路由的指令标签组件
    * `<router-view>` ： 渲染路径匹配到的视图组件，它还可以内嵌自己的 `<router-view>`，根据嵌套路径渲染嵌套组件
    * `<router-link>`：支持用户在具有路由功能的应用中点击导航

* 切页动效，Vue 提供了 transition 的封装组件，具体使用细则，可以自行查阅相关资料

* 本章其实给了一些具有实际操作意义的 Demo，但对于我来说，更多的是对这些概念和关键字有了一些认识，因为具体的内容还是需要在实践中才会深有体会。

### 第4章 页面的区块化与组件的封装

* 本章主要介绍了如何把一个原型图变为页、块的拆分，以及对应于 Vue 中如何将其一步一步改造为可复用的组件。同时主要介绍了普通组件的封装与使用，以及插槽 `<slot></slot>` 的使用。
* 个人感觉，在实际项目中封装过组件后，再回过头来看这些内容，其实还是蛮容易理解的，比最开始一头雾水的看，容易理解的多了。
* 本章的整个示例的实现，化成一个工作流程图的话，主要经历了如下步骤：
    ```
     依葫芦画瓢 -> 代码去重 -> 抽取数据结构 -> 采集与制作样本数据 -> 分析设计组件接口 -> 组件内部的细化与重构
    ```
    * 依葫芦画瓢：拿到界面设计图后无须思考的太多，先用框架全出功能区块，然后直接编写视图的HTML。
    * 代码去重：将视图模板中不断重复的逻辑封装为组件，减少页面的重复逻辑。
    * 抽取数据结构：将页面中的文字用数据对象与数组取代，并制定数据结构的说明文档。
    * 采集与制作样本数据：参照数据结构说明文档采集更多的真实样本，切记胡乱地敲入一些字符，在数据不明确的情况下可能会遮盖一些本应很明显的使用需求。
    * 分析设计组件接口：简化组件的使用接口，让组件变得更好用。
    * 组件内部的细化与重构：优化组件的内部实现，使其变得更合理。


### 第5章 Vue 的测试与调试技术

本章主要介绍了一些单元测试、自动化测试的方式和方法，具体实施还应该结合实际项目开发节奏，因人而异。


### 第6章 视图与表单的处理

* 本章主要介绍了如何通过 UIkit 开发一个适用于自身项目的 vue ui库，常用于表单、表格等组件化实现。
* 本章给予我最大的收获是，高级组件与 Render 方法。正是这一块的说明，让我知道了，现有的 element-ui 、iview 等基于 Vue 的 UI 组件库的基本原理。


### 第7章 Vuex 状态管理

* 本章主要讲解了 Vuex 的使用。
* 个人感觉本章作者在讲述 Vuex 的 modules 部分有些歧义的地方，p274页，子读取器、子动作、子变更的引用有些不明确。
* 在使用 Vuex 时，需要注意，当页面刷新后，Vuex 相关的数据都会被置为初始值，如果需要保存对应的数据，应当考虑使用本地存储。